<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TRP Grant Pipeline Dashboard</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');
  * { margin:0; padding:0; box-sizing:border-box; }
  :root {
    --teal: #8BD0CF; --teal-dark: #5BA8A6; --purple: #7C3AED; --blue: #3B82F6;
    --green: #10B981; --amber: #F59E0B; --red: #EF4444; --pink: #EC4899;
    --bg: #f8fafc; --card: #ffffff; --text: #1e293b; --text2: #64748b;
    --text3: #94a3b8; --border: #e2e8f0;
    --shadow: 0 1px 3px rgba(0,0,0,0.08);
    --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
  }
  body { font-family:'Montserrat',sans-serif; background:var(--bg); color:var(--text); display:flex; height:100vh; overflow:hidden; }

  /* Sidebar */
  .sidebar { width:260px; min-width:260px; background:#0f172a; color:#fff; display:flex; flex-direction:column; }
  .sidebar-hdr { padding:24px 20px 16px; border-bottom:1px solid rgba(255,255,255,0.08); }
  .sidebar-hdr h1 { font-size:17px; font-weight:700; display:flex; align-items:center; gap:10px; }
  .sidebar-hdr h1 .ico { width:32px; height:32px; background:var(--teal); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:15px; }
  .sidebar-hdr p { font-size:11px; color:var(--text3); margin-top:6px; }
  .nav-section { padding:16px 12px 8px; }
  .nav-label { font-size:10px; font-weight:600; text-transform:uppercase; letter-spacing:0.08em; color:var(--text3); padding:0 8px 8px; }
  .nav-item { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:8px; cursor:pointer; font-size:13px; font-weight:500; color:#cbd5e1; transition:all .15s; margin-bottom:2px; }
  .nav-item:hover { background:rgba(255,255,255,0.06); color:#fff; }
  .nav-item.active { background:var(--teal-dark); color:#fff; box-shadow:0 2px 8px rgba(91,168,166,0.3); }
  .nav-item .ni { width:18px; text-align:center; font-size:14px; }
  .nav-item .badge { margin-left:auto; background:rgba(255,255,255,0.15); padding:2px 8px; border-radius:10px; font-size:10px; font-weight:600; }
  .sidebar-ft { margin-top:auto; padding:16px 20px; border-top:1px solid rgba(255,255,255,0.08); font-size:11px; color:var(--text3); }

  /* Main */
  .main { flex:1; overflow-y:auto; }
  .top-bar { position:sticky; top:0; z-index:100; background:rgba(255,255,255,0.95); backdrop-filter:blur(12px); padding:14px 32px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
  .top-bar h2 { font-size:20px; font-weight:700; }
  .top-bar small { font-size:12px; color:var(--text3); }
  .content { padding:24px 32px 40px; }
  .view { display:none; } .view.active { display:block; }

  /* KPI */
  .kpi-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:14px; margin-bottom:24px; }
  .kpi { background:var(--card); border-radius:12px; padding:18px; border:1px solid var(--border); position:relative; overflow:hidden; transition:transform .15s,box-shadow .15s; }
  .kpi:hover { transform:translateY(-2px); box-shadow:var(--shadow-lg); }
  .kpi::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; }
  .kpi.c-teal::before{background:var(--teal)} .kpi.c-green::before{background:var(--green)} .kpi.c-purple::before{background:var(--purple)} .kpi.c-amber::before{background:var(--amber)} .kpi.c-pink::before{background:var(--pink)}
  .kpi-lbl { font-size:11px; font-weight:500; color:var(--text2); text-transform:uppercase; letter-spacing:.04em; margin-bottom:6px; }
  .kpi-val { font-size:26px; font-weight:700; }
  .kpi.c-teal .kpi-val{color:var(--teal-dark)} .kpi.c-green .kpi-val{color:var(--green)} .kpi.c-purple .kpi-val{color:var(--purple)} .kpi.c-amber .kpi-val{color:var(--amber)} .kpi.c-pink .kpi-val{color:var(--pink)}
  .kpi-sub { font-size:11px; color:var(--text3); margin-top:2px; }

  /* Cards */
  .card { background:var(--card); border-radius:12px; border:1px solid var(--border); margin-bottom:20px; overflow:hidden; }
  .card-hdr { padding:14px 20px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
  .card-hdr h3 { font-size:15px; font-weight:600; }

  /* Tables */
  table { width:100%; border-collapse:collapse; font-size:12px; }
  thead th { background:#f1f5f9; padding:9px 12px; text-align:left; font-weight:600; font-size:10px; text-transform:uppercase; letter-spacing:.05em; color:var(--text2); border-bottom:2px solid var(--border); }
  tbody td { padding:10px 12px; border-bottom:1px solid #f1f5f9; vertical-align:middle; }
  tbody tr:hover { background:#f8fafc; }
  tbody tr { cursor:pointer; }

  /* Badges */
  .badge-s { display:inline-flex; align-items:center; gap:5px; padding:3px 9px; border-radius:16px; font-size:11px; font-weight:500; white-space:nowrap; }
  .badge-s::before { content:''; width:6px; height:6px; border-radius:50%; }
  .b-approved{background:#d1fae5;color:#065f46} .b-approved::before{background:#10b981}
  .b-submitted{background:#dbeafe;color:#1e40af} .b-submitted::before{background:#3b82f6}
  .b-received{background:#fae8ff;color:#86198f} .b-received::before{background:#d946ef}
  .b-researching{background:#fef3c7;color:#92400e} .b-researching::before{background:#f59e0b}
  .b-drafting{background:#fed7aa;color:#9a3412} .b-drafting::before{background:#f97316}
  .b-review{background:#e0e7ff;color:#3730a3} .b-review::before{background:#6366f1}
  .b-reporting{background:#fce7f3;color:#9d174d} .b-reporting::before{background:#ec4899}
  .b-closed{background:#e2e8f0;color:#475569} .b-closed::before{background:#94a3b8}

  /* Bars */
  .bar-row { display:flex; align-items:center; gap:10px; margin-bottom:8px; }
  .bar-lbl { width:130px; font-size:11px; font-weight:500; text-align:right; color:var(--text2); flex-shrink:0; }
  .bar-track { flex:1; height:22px; background:#f1f5f9; border-radius:6px; overflow:hidden; }
  .bar-fill { height:100%; border-radius:6px; display:flex; align-items:center; padding-left:8px; font-size:10px; font-weight:600; color:#fff; transition:width .6s; }
  .bar-val { font-size:11px; font-weight:600; width:80px; text-align:right; flex-shrink:0; }

  /* Donut */
  .donut-wrap { display:flex; align-items:center; gap:20px; }
  .donut-leg { display:flex; flex-direction:column; gap:6px; }
  .leg-item { display:flex; align-items:center; gap:6px; font-size:11px; }
  .leg-dot { width:10px; height:10px; border-radius:3px; flex-shrink:0; }

  /* Financial */
  .fin-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; text-align:center; padding:16px 0; }
  .fin-lbl { font-size:11px; color:var(--text3); margin-bottom:4px; }
  .fin-val { font-size:22px; font-weight:700; }

  /* Grid */
  .two-col { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px; }

  /* Deliverable */
  .del-card { background:var(--card); border:1px solid var(--border); border-radius:12px; padding:20px; margin-bottom:14px; border-left:4px solid var(--pink); }
  .del-card h4 { font-size:14px; font-weight:600; margin-bottom:6px; }
  .del-meta { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:10px; margin-top:10px; }
  .del-field label { display:block; font-size:10px; font-weight:600; color:var(--text3); text-transform:uppercase; letter-spacing:.04em; margin-bottom:1px; }
  .del-field span { font-size:12px; font-weight:500; }
  .req-box { background:#fef3c7; border:1px solid #fde68a; border-radius:8px; padding:10px 12px; margin-top:10px; font-size:11px; line-height:1.5; color:#92400e; }
  .req-box strong { display:block; margin-bottom:3px; font-size:10px; text-transform:uppercase; letter-spacing:.04em; }

  /* Modal */
  .modal-bg { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); backdrop-filter:blur(4px); z-index:1000; align-items:center; justify-content:center; }
  .modal-bg.show { display:flex; }
  .modal { background:#fff; border-radius:16px; width:90%; max-width:600px; max-height:80vh; overflow-y:auto; box-shadow:0 25px 50px -12px rgba(0,0,0,0.25); }
  .modal-hdr { padding:18px 22px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
  .modal-hdr h3 { font-size:16px; font-weight:700; }
  .modal-x { width:30px; height:30px; border:none; background:#f1f5f9; border-radius:8px; cursor:pointer; font-size:16px; color:var(--text2); display:flex; align-items:center; justify-content:center; }
  .modal-body { padding:20px; }
  .d-row { display:flex; padding:8px 0; border-bottom:1px solid #f8fafc; }
  .d-lbl { width:150px; font-size:11px; font-weight:600; color:var(--text2); text-transform:uppercase; letter-spacing:.04em; flex-shrink:0; }
  .d-val { font-size:13px; flex:1; }

  /* Search */
  .search-box { padding:7px 12px; border:1px solid var(--border); border-radius:8px; font-size:12px; width:220px; outline:none; font-family:'Montserrat',sans-serif; }
  .search-box:focus { border-color:var(--teal); }

  @media(max-width:768px) {
    .sidebar{width:56px;min-width:56px} .nav-item span,.sidebar-hdr h1 span,.sidebar-hdr p,.nav-label,.sidebar-ft,.badge{display:none}
    .content{padding:16px} .kpi-grid{grid-template-columns:repeat(2,1fr)} .two-col{grid-template-columns:1fr} .fin-grid{grid-template-columns:repeat(2,1fr)}
  }
</style>
</head>
<body>

<nav class="sidebar">
  <div class="sidebar-hdr">
    <h1><span class="ico">&#9830;</span> <span>Grant Pipeline</span></h1>
    <p>2026 TRP Grant Tracker</p>
  </div>
  <div class="nav-section">
    <div class="nav-label">Pipeline</div>
    <div class="nav-item active" onclick="go('dashboard',this)">
      <span class="ni">&#9635;</span> <span>Dashboard</span>
    </div>
    <div class="nav-item" onclick="go('grants',this)">
      <span class="ni">&#9776;</span> <span>Grant Application List</span>
      <span class="badge" id="g-count">0</span>
    </div>
    <div class="nav-item" onclick="go('deliverables',this)">
      <span class="ni">&#10003;</span> <span>Deliverable Tracking</span>
    </div>
  </div>
  <div class="sidebar-ft">TRP Grant Tracker 2026</div>
</nav>

<div class="main">
  <div class="top-bar">
    <h2 id="v-title">Dashboard</h2>
    <small id="updated"></small>
  </div>
  <div class="content">

    <!-- DASHBOARD -->
    <div class="view active" id="v-dashboard">
      <div class="kpi-grid" id="kpis"></div>
      <div class="two-col">
        <div class="card"><div class="card-hdr"><h3>Pipeline by Status</h3></div><div style="padding:16px" id="bars"></div></div>
        <div class="card"><div class="card-hdr"><h3>Funding Distribution</h3></div><div style="padding:16px"><div class="donut-wrap"><svg viewBox="0 0 160 160" width="150" height="150" id="donut"></svg><div class="donut-leg" id="legend"></div></div></div></div>
      </div>
      <div class="two-col">
        <div class="card"><div class="card-hdr"><h3>Upcoming Deadlines</h3></div>
          <table><thead><tr><th>Grant</th><th>Deadline</th><th>Days Left</th><th>Status</th></tr></thead><tbody id="deadlines-tb"></tbody></table>
        </div>
        <div class="card"><div class="card-hdr"><h3>Financial Summary</h3></div><div class="fin-grid" id="fin-grid"></div></div>
      </div>
      <div class="card"><div class="card-hdr"><h3>Deliverables Overview</h3></div>
        <table><thead><tr><th>Grant</th><th>Type</th><th>Restricted To</th><th>Report Due</th><th>Requirements</th></tr></thead><tbody id="del-tb"></tbody></table>
      </div>
    </div>

    <!-- GRANT LIST -->
    <div class="view" id="v-grants">
      <div class="card">
        <div class="card-hdr"><h3>Grant Application List</h3><input class="search-box" id="g-search" placeholder="Search grants..."></div>
        <div style="overflow-x:auto">
          <table><thead><tr><th>Grant Name</th><th>Description</th><th>Deadline</th><th>TRP Contact</th><th>Grant Contact</th><th>Amount</th><th>Status</th><th>Submitted</th><th>Agreement</th><th>Awarded</th><th>Funds</th><th>Complete</th></tr></thead>
          <tbody id="grants-tb"></tbody></table>
        </div>
      </div>
    </div>

    <!-- DELIVERABLES -->
    <div class="view" id="v-deliverables">
      <div id="del-cards"></div>
    </div>

  </div>
</div>

<!-- Modal -->
<div class="modal-bg" id="modal-bg" onclick="if(event.target===this)closeM()">
  <div class="modal"><div class="modal-hdr"><h3 id="m-title"></h3><button class="modal-x" onclick="closeM()">&times;</button></div><div class="modal-body" id="m-body"></div></div>
</div>

<script>
const grants=[
  {name:"Artemis Rising 2026",desc:"Anonymous Award for Mask 2.0",deadline:"2025-12-19",trp:"Erika/Gretchen",contact:"Carol Berberich",email:"carol@scottsf.com",amount:150000,status:"Approved",submitted:"2025-12-19",agreement:"TRP Signed Agreement Sent",awarded:150000,funds:"Funds Received",notes:"12/19/25- Application submitted pending TRP (JSN) Signature. Erika submitted signed application and requested docs. 12/17/2025-Funds were secured by Regina. Requested application, budget, & IRS form (disbursement expected Jan 2026)",folder:"Artemis Grant- Mask 2.0",complete:true},
  {name:"Fair Play Institute",desc:"Miss Rep 2.0 Impact campaign",deadline:"2026-02-28",trp:"Erika",contact:"Jenn Younker",email:"jenn@fairplaypolicyinstitute.org",amount:25000,status:"Application Submitted",submitted:"2026-02-05",agreement:"",awarded:null,funds:"",notes:"2/5/26 submitted via email to Jenn",folder:"Fair Play Institute",complete:false}
];
const deliverables=[
  {name:"Artemis Rising 2026",id:"",period:"",assignee:"",type:"Restricted - Film",restricted:"The Mask You Live In 2.0",due:"",requirements:"Exhibit B: Itemized Expenditure showing transfer of funds.\nE&O Insurance Certificate required prior to any screening, festivals and send proof to Carol",spent:null,remaining:null,file:"",notes:""},
  {name:"Minderoo",id:"",period:"",assignee:"",type:"Restricted - Film",restricted:"Miss Rep 2.0",due:"",requirements:"",spent:null,remaining:null,file:"",notes:""}
];

const $=s=>document.getElementById(s);
const fmt=n=>n!=null?'$'+n.toLocaleString():'—';
const fDate=d=>{if(!d)return'—';return new Date(d+'T00:00:00').toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'})};
const dBtw=(a,b)=>{if(!a||!b)return null;return Math.round((new Date(b)-new Date(a))/864e5)};
const today=new Date().toISOString().split('T')[0];
const titles={dashboard:'Dashboard',grants:'Grant Application List',deliverables:'Deliverable Tracking'};

function bCls(s){const m={'Approved':'b-approved','Application Submitted':'b-submitted','Funds Received':'b-received','Researching':'b-researching','Drafting':'b-drafting','Under Review':'b-review','Reporting':'b-reporting','Closed':'b-closed'};return m[s]||'b-closed'}
function badge(s){return`<span class="badge-s ${bCls(s)}">${s||'—'}</span>`}

function go(v,el){
  document.querySelectorAll('.view').forEach(x=>x.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(x=>x.classList.remove('active'));
  $('v-'+v).classList.add('active');
  el.classList.add('active');
  $('v-title').textContent=titles[v];
}

function openM(i){
  const g=grants[i];
  $('m-title').textContent=g.name;
  const f=[['Description',g.desc],['Status',g.status],['Deadline',fDate(g.deadline)],['TRP Contact',g.trp],['Grant Contact',g.contact],['Email',g.email],['Amount',fmt(g.amount)],['Submitted',fDate(g.submitted)],['Agreement',g.agreement||'—'],['Awarded',fmt(g.awarded)],['Funds Status',g.funds||'—'],['Notes',g.notes||'—'],['Complete',g.complete?'Yes':'No']];
  $('m-body').innerHTML=f.map(([l,v])=>`<div class="d-row"><div class="d-lbl">${l}</div><div class="d-val">${l==='Status'?badge(v):v}</div></div>`).join('');
  $('modal-bg').classList.add('show');
}
function closeM(){$('modal-bg').classList.remove('show')}
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeM()});

function renderDash(){
  const tot=grants.length, awarded=grants.reduce((s,g)=>s+(g.awarded||0),0);
  const recv=grants.filter(g=>g.funds==='Funds Received').reduce((s,g)=>s+(g.awarded||0),0);
  const pend=grants.filter(g=>g.status==='Application Submitted').length;
  const rate=tot?Math.round(grants.filter(g=>g.status==='Approved').length/tot*100):0;

  $('kpis').innerHTML=[
    {l:'Total Grants',v:tot,c:'c-teal',s:'in pipeline'},
    {l:'Total Awarded',v:fmt(awarded),c:'c-green',s:'approved funding'},
    {l:'Funds Received',v:fmt(recv),c:'c-purple',s:'in hand'},
    {l:'Pending Apps',v:pend,c:'c-amber',s:'awaiting review'},
    {l:'Approval Rate',v:rate+'%',c:'c-pink',s:'success rate'}
  ].map(k=>`<div class="kpi ${k.c}"><div class="kpi-lbl">${k.l}</div><div class="kpi-val">${k.v}</div><div class="kpi-sub">${k.s}</div></div>`).join('');

  const stages=['Approved','Application Submitted','Researching','Drafting','Under Review','Funds Received','Reporting','Closed'];
  const colors=['#10b981','#3b82f6','#f59e0b','#f97316','#6366f1','#d946ef','#ec4899','#94a3b8'];
  const mx=Math.max(...stages.map(s=>grants.filter(g=>g.status===s).length),1);
  $('bars').innerHTML=stages.map((s,i)=>{
    const c=grants.filter(g=>g.status===s).length, a=grants.filter(g=>g.status===s).reduce((x,g)=>x+(g.awarded||0),0);
    const p=Math.max((c/mx)*100,c>0?15:0);
    return`<div class="bar-row"><div class="bar-lbl">${s}</div><div class="bar-track"><div class="bar-fill" style="width:${p}%;background:${colors[i]}">${c}</div></div><div class="bar-val">${fmt(a)}</div></div>`;
  }).join('');

  // Donut
  const dd=stages.map((s,i)=>({l:s,c:grants.filter(g=>g.status===s).length,cl:colors[i]})).filter(d=>d.c>0);
  const t=dd.reduce((s,d)=>s+d.c,0)||1;let ca=-90;const svg=$('donut');svg.innerHTML='';
  if(!dd.length){svg.innerHTML='<text x="80" y="85" text-anchor="middle" fill="#94a3b8" font-size="12">No data</text>'}
  else{dd.forEach(d=>{const a=(d.c/t)*360,s1=ca*Math.PI/180,e1=(ca+a)*Math.PI/180,la=a>180?1:0;
    const x1=80+60*Math.cos(s1),y1=80+60*Math.sin(s1),x2=80+60*Math.cos(e1),y2=80+60*Math.sin(e1);
    const ix1=80+35*Math.cos(e1),iy1=80+35*Math.sin(e1),ix2=80+35*Math.cos(s1),iy2=80+35*Math.sin(s1);
    svg.innerHTML+=`<path d="M ${x1} ${y1} A 60 60 0 ${la} 1 ${x2} ${y2} L ${ix1} ${iy1} A 35 35 0 ${la} 0 ${ix2} ${iy2} Z" fill="${d.cl}" opacity="0.9"/>`;ca+=a});
    svg.innerHTML+='<circle cx="80" cy="80" r="32" fill="white"/>';
    svg.innerHTML+=`<text x="80" y="76" text-anchor="middle" fill="#1e293b" font-size="20" font-weight="700">${t}</text><text x="80" y="92" text-anchor="middle" fill="#94a3b8" font-size="10">grants</text>`}
  $('legend').innerHTML=dd.map(d=>`<div class="leg-item"><div class="leg-dot" style="background:${d.cl}"></div>${d.l} (${d.c})</div>`).join('');

  // Deadlines
  const up=[...grants].filter(g=>g.deadline>=today).sort((a,b)=>a.deadline.localeCompare(b.deadline));
  $('deadlines-tb').innerHTML=up.length?up.map(g=>{const d=dBtw(today,g.deadline),u=d<=7?'color:var(--red);font-weight:600':d<=30?'color:var(--amber)':'';
    return`<tr onclick="openM(${grants.indexOf(g)})"><td><strong>${g.name}</strong></td><td>${fDate(g.deadline)}</td><td style="${u}">${d} days</td><td>${badge(g.status)}</td></tr>`}).join(''):'<tr><td colspan="4" style="text-align:center;color:var(--text3);padding:20px">No upcoming deadlines</td></tr>';

  // Financial
  const spent=deliverables.reduce((s,d)=>s+(d.spent||0),0),rem=awarded-spent,util=awarded?Math.round(spent/awarded*100):0;
  $('fin-grid').innerHTML=[
    {l:'Total Awarded',v:fmt(awarded),c:'var(--green)'},
    {l:'Total Spent',v:fmt(spent),c:'var(--blue)'},
    {l:'Remaining',v:fmt(rem),c:'var(--amber)'},
    {l:'Utilization',v:util+'%',c:'var(--purple)'}
  ].map(f=>`<div><div class="fin-lbl">${f.l}</div><div class="fin-val" style="color:${f.c}">${f.v}</div></div>`).join('');

  // Deliverables table on dashboard
  $('del-tb').innerHTML=deliverables.map(d=>`<tr><td><strong>${d.name}</strong></td><td>${d.type||'—'}</td><td>${d.restricted||'—'}</td><td>${fDate(d.due)}</td><td style="max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${d.requirements||'—'}</td></tr>`).join('');
}

function renderGrants(f=''){
  const fl=grants.filter(g=>!f||g.name.toLowerCase().includes(f)||g.desc.toLowerCase().includes(f)||g.status.toLowerCase().includes(f));
  $('g-count').textContent=grants.length;
  $('grants-tb').innerHTML=fl.map((g,i)=>`<tr onclick="openM(${grants.indexOf(g)})">
    <td><strong>${g.name}</strong></td><td style="max-width:180px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${g.desc}</td><td>${fDate(g.deadline)}</td><td>${g.trp}</td><td>${g.contact}</td><td style="font-weight:600">${fmt(g.amount)}</td><td>${badge(g.status)}</td><td>${fDate(g.submitted)}</td><td style="max-width:160px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${g.agreement||'—'}</td><td style="font-weight:600">${fmt(g.awarded)}</td><td>${g.funds||'—'}</td><td>${g.complete?'<span style="color:var(--green);font-weight:600">Yes</span>':'<span style="color:var(--text3)">No</span>'}</td>
  </tr>`).join('');
}
$('g-search').addEventListener('input',e=>renderGrants(e.target.value.toLowerCase()));

function renderDel(){
  $('del-cards').innerHTML=deliverables.map(d=>`<div class="del-card"><h4>${d.name}</h4>
    <div class="del-meta">
      <div class="del-field"><label>Grant Type</label><span>${d.type||'—'}</span></div>
      <div class="del-field"><label>Restricted To</label><span>${d.restricted||'—'}</span></div>
      <div class="del-field"><label>Report Due</label><span>${fDate(d.due)}</span></div>
      <div class="del-field"><label>Amount Spent</label><span>${fmt(d.spent)}</span></div>
      <div class="del-field"><label>Remaining</label><span>${fmt(d.remaining)}</span></div>
      <div class="del-field"><label>Grant ID</label><span>${d.id||'—'}</span></div>
    </div>
    ${d.requirements?`<div class="req-box"><strong>Report Requirements</strong>${d.requirements.replace(/\n/g,'<br>')}</div>`:''}</div>`).join('');
}

$('updated').textContent='Updated: '+new Date().toLocaleDateString();
renderDash(); renderGrants(); renderDel();
</script>
</body>
</html>
